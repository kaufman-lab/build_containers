Bootstrap: docker
From: centos:7.6.1810
Stage: build


#######################################
%setup
#######################################




#######################################
%files
#######################################




#######################################
%post
#######################################


yum -y install wget
yum -y install cpio
mkdir /workspace
cd /workspace

#https://software.intel.com/content/www/us/en/develop/articles/installing-intel-free-libs-and-python-yum-repo.html


cat > intel-mkl.repo << EOF
[intel-mkl-repo]
name='Intel(R) Intel Math Kernel Library'
baseurl=https://yum.repos.intel.com/mkl
enabled=1
gpgcheck=1
repo_gpgcheck=0
#gpgkey=https://yum.repos.intel.com/mkl/setup/PUBLIC_KEY.PUB
debuglevel=10
enabled=1
EOF

yum-config-manager --add-repo intel-mkl.repo
#yum-config-manager --add-repo https://yum.repos.intel.com/mkl/setup/intel-mkl.repo
yum -y install intel-mkl-2020.0-088

#wget http://registrationcenter-download.intel.com/akdlm/irc_nas/tec/15275/l_mkl_2019.3.199.tgz
#tar zxf l_mkl_2019.3.199.tgz


#wget http://registrationcenter-download.intel.com/akdlm/irc_nas/tec/16917/l_mkl_2020.4.304.tgz
#tar zxf l_mkl_2020.4.304.tgz


#./install.sh --SHARED_INSTALL --duplicate
#./install.sh --SHARED_INSTALL --silent

cd /workspace
wget https://cran.r-project.org/src/base/R-3/R-3.6.2.tar.gz
tar zxf R-3.6.2.tar.gz
cd R-3.6.2/




#yum -y install epel-release
#yum -y install R

#set user library to somewhere other than home, to avoid library conflicts with the local machine
#note that /pseudohome doesn't exist. you need to mount it when starting the images if you want to install user packages.
#echo "R_LIBS_USER=/pseudohome/R/packages" >> usr/local/lib/R/etc/Renviron.site
#echo "options(repos = c(REPO_NAME = "https://packagemanager.rstudio.com/all/latest"))" >> usr/local/lib/R/etc/Rprofile.site

#Rscript -e 'install.packages(c("remotes",repos = "http://cran.us.r-project.org"))' #bootstrap from most recent version of remotes since this is where the remotes::install_version function lives.
#  
# 
# 
# Rscript -e 'remotes::install_version("askpass","1.1")'
# Rscript -e 'remotes::install_version("assertthat","0.2.1")'
# Rscript -e 'remotes::install_version("backports","1.2.1")'
# Rscript -e 'remotes::install_version("base64enc","0.1-3")'
# Rscript -e 'remotes::install_version("base64url","1.4")'
# Rscript -e 'remotes::install_version("batchtools","0.9.15")'
# Rscript -e 'remotes::install_version("BH","1.72.0-3")'
# Rscript -e 'remotes::install_version("bit","4.0.4")'
# Rscript -e 'remotes::install_version("bit64","4.0.5")'
# Rscript -e 'remotes::install_version("brew","1.0-6")'
# Rscript -e 'remotes::install_version("broom","0.7.3")'
# Rscript -e 'remotes::install_version("callr","3.4.3")'
# Rscript -e 'remotes::install_version("checkmate","2.0.0")'
# Rscript -e 'remotes::install_version("cli","2.0.2")'
# Rscript -e 'remotes::install_version("clipr","0.7.0")'
# Rscript -e 'remotes::install_version("colorspace","1.4-1")'
# Rscript -e 'remotes::install_version("commonmark","1.7")'
# Rscript -e 'remotes::install_version("config","0.3")'
# Rscript -e 'remotes::install_version("covr","3.5.0")'
# Rscript -e 'remotes::install_version("cpp11","0.2.3")'
# Rscript -e 'remotes::install_version("crayon","1.3.4")'
# Rscript -e 'remotes::install_version("crosstalk","1.1.0.1")'
# Rscript -e 'remotes::install_version("curl","4.3")'
# Rscript -e 'remotes::install_version("data.table","1.13.6")'
# Rscript -e 'remotes::install_version("debugme","1.1.0")'
# Rscript -e 'remotes::install_version("desc","1.2.0")'
# Rscript -e 'remotes::install_version("devtools","2.3.1")'
# Rscript -e 'remotes::install_version("digest","0.6.27")'
# Rscript -e 'remotes::install_version("dplyr","1.0.2")'
# Rscript -e 'remotes::install_version("DT","0.14")'
# Rscript -e 'remotes::install_version("ellipsis","0.3.1")'
# Rscript -e 'remotes::install_version("evaluate","0.14")'
# Rscript -e 'remotes::install_version("fansi","0.4.1")'
# Rscript -e 'remotes::install_version("farver","2.0.3")'
# Rscript -e 'remotes::install_version("fs","1.5.0")'
# Rscript -e 'remotes::install_version("future","1.21.0")'
# Rscript -e 'remotes::install_version("future.apply","1.7.0")'
# Rscript -e 'remotes::install_version("future.batchtools","0.10.)'
# Rscript -e 'remotes::install_version("futurebrain","0.9.8.1")'
# Rscript -e 'remotes::install_version("generics","0.0.2")'
# Rscript -e 'remotes::install_version("ggplot2","3.3.2")'
# Rscript -e 'remotes::install_version("gh","1.1.0")'
# Rscript -e 'remotes::install_version("git2r","0.27.1")'
# Rscript -e 'remotes::install_version("globals","0.14.0")'
# Rscript -e 'remotes::install_version("glue","1.4.1")'
# Rscript -e 'remotes::install_version("gtable","0.3.0")'
# Rscript -e 'remotes::install_version("highr","0.8")'
# Rscript -e 'remotes::install_version("hms","0.5.3")'
# Rscript -e 'remotes::install_version("htmltools","0.5.0")'
# Rscript -e 'remotes::install_version("htmlwidgets","1.5.1")'
# Rscript -e 'remotes::install_version("httr","1.4.2")'
# Rscript -e 'remotes::install_version("ini","0.3.1")'
# Rscript -e 'remotes::install_version("isoband","0.2.2")'
# Rscript -e 'remotes::install_version("jsonlite","1.7.0")'
# Rscript -e 'remotes::install_version("knitr","1.29")'
# Rscript -e 'remotes::install_version("labeling","0.3")'
# Rscript -e 'remotes::install_version("later","1.1.0.1")'
# Rscript -e 'remotes::install_version("lazyeval","0.2.2")'
# Rscript -e 'remotes::install_version("lifecycle","0.2.0")'
# Rscript -e 'remotes::install_version("listenv","0.8.0")'
# Rscript -e 'remotes::install_version("lubridate","1.7.9")'
# Rscript -e 'remotes::install_version("magrittr","1.5")'
# Rscript -e 'remotes::install_version("markdown","1.1")'
# Rscript -e 'remotes::install_version("memoise","1.1.0")'
# Rscript -e 'remotes::install_version("mime","0.9")'
# Rscript -e 'remotes::install_version("munsell","0.5.0")'
# Rscript -e 'remotes::install_version("numDeriv","2016.8-1.1")'
# Rscript -e 'remotes::install_version("openssl","1.4.2")'
# Rscript -e 'remotes::install_version("parallelly","1.23.0")'
# Rscript -e 'remotes::install_version("pillar","1.4.6")'
# Rscript -e 'remotes::install_version("pkgbuild","1.1.0")'
# Rscript -e 'remotes::install_version("pkgconfig","2.0.3")'
# Rscript -e 'remotes::install_version("pkgload","1.1.0")'
# Rscript -e 'remotes::install_version("pls","2.7-3")'
# Rscript -e 'remotes::install_version("praise","1.0.0")'
# Rscript -e 'remotes::install_version("prettyunits","1.1.1")'
# Rscript -e 'remotes::install_version("processx","3.4.3")'
# Rscript -e 'remotes::install_version("progress","1.2.2")'
# Rscript -e 'remotes::install_version("promises","1.1.1")'
# Rscript -e 'remotes::install_version("ps","1.3.3")'
# Rscript -e 'remotes::install_version("purrr","0.3.4")'
# Rscript -e 'remotes::install_version("R.methodsS3","1.8.1")'
# Rscript -e 'remotes::install_version("R.oo","1.24.0")'
# Rscript -e 'remotes::install_version("R.utils","2.10.1")'
# Rscript -e 'remotes::install_version("R6","2.5.0")'
# Rscript -e 'remotes::install_version("rappdirs","0.3.3")'
# Rscript -e 'remotes::install_version("raster","3.4-13")'
# Rscript -e 'remotes::install_version("rcmdcheck","1.3.3")'
# Rscript -e 'remotes::install_version("RColorBrewer","1.1-2")'
# Rscript -e 'remotes::install_version("Rcpp","1.0.5")'
# Rscript -e 'remotes::install_version("rematch2","2.1.2")'
# Rscript -e 'remotes::install_version("remotes","2.2.0")'
# Rscript -e 'remotes::install_version("reticulate","1.16")'
# Rscript -e 'remotes::install_version("rex","1.2.0")'
# Rscript -e 'remotes::install_version("rgdal","1.5-23")'
# Rscript -e 'remotes::install_version("rgeos","0.5-5")'
# Rscript -e 'remotes::install_version("rlang","0.4.7")'
# Rscript -e 'remotes::install_version("roxygen2","7.1.1")'
# Rscript -e 'remotes::install_version("rprojroot","1.3-2")'
# Rscript -e 'remotes::install_version("RSclient","0.7-3")'
# Rscript -e 'remotes::install_version("Rserve","1.8-7")'
# Rscript -e 'remotes::install_version("rstudioapi","0.11")'
# Rscript -e 'remotes::install_version("rversions","2.0.2")'
# Rscript -e 'remotes::install_version("scales","1.1.1")'
# Rscript -e 'remotes::install_version("sessioninfo","1.1.1")'
# Rscript -e 'remotes::install_version("sp","1.4-2")'
# Rscript -e 'remotes::install_version("ssh.utils","1.0")'
# Rscript -e 'remotes::install_version("stringi","1.5.3")'
# Rscript -e 'remotes::install_version("stringr","1.4.0")'
# Rscript -e 'remotes::install_version("survival","3.2-7")'
# Rscript -e 'remotes::install_version("sys","3.4")'
# Rscript -e 'remotes::install_version("testthat","2.3.2")'
# Rscript -e 'remotes::install_version("tibble","3.0.3")'
# Rscript -e 'remotes::install_version("tidyr","1.1.2")'
# Rscript -e 'remotes::install_version("tidyselect","1.1.0")'
# Rscript -e 'remotes::install_version("usethis","1.6.1")'
# Rscript -e 'remotes::install_version("utf8","1.1.4")'
# Rscript -e 'remotes::install_version("vctrs","0.3.2")'
# Rscript -e 'remotes::install_version("viridisLite","0.3.0")'
# Rscript -e 'remotes::install_version("whisker","0.4")'
# Rscript -e 'remotes::install_version("withr","2.4.1")'
# Rscript -e 'remotes::install_version("xfun","0.16")'
# Rscript -e 'remotes::install_version("xml2","1.3.2")'
# Rscript -e 'remotes::install_version("xopen","1.0.0")'
# Rscript -e 'remotes::install_version("yaml","2.2.1")'
# Rscript -e 'remotes::install_version("zeallot","0.1.0")'




#######################################
%environment
#######################################


