Bootstrap: docker
From: rocker/r-ver:4.1

%runscript 
  Rscript /runscript.R 


#######################################
%setup
#######################################


echo ${{ secrets.GITHUB_TOKEN }} > .Renviron




#######################################
%files
#######################################


.Renviron .Renviron




#######################################
%post
#######################################


%post
    Rscript -e "install.packages('remotes')"
    Rscript -e "install.packages('bit64')"
    Rscript -e "remotes::install_github('kaufman-lab/SpatioTemporal', ref = '0df042c')"
    Rscript -e "remotes::install_github('kaufman-lab/eacSTpredict', auth_token = Sys.getenv('GH_TOKEN'))"




#######################################
%environment
#######################################


