Bootstrap: docker
From: rocker/r-ver:4.1

%runscript 
  Rscript /runscript.R 


#######################################
%setup
#######################################




#######################################
%files
#######################################


library(eacSTpredict)
library(data.table)

args <- commandArgs(trailingOnly=TRUE)
if(length(args) != 2){
    stop("Provide covariate file and pollutant as command arguments") 
}
cov <- fread(args[1])
pred <- predictST_national(cov, args[2])
fwrite(pred) # write to stdout




#######################################
%post
#######################################


%post
    Rscript -e "install.packages('remotes')"
    Rscript -e "remotes::install_github('SpatioTemporal', ref = '0df042c')"
    Rscript -e "remotes::install_github('kaufman-lab/eacSTpredict')"





#######################################
%environment
#######################################


