Bootstrap: docker 
From: python:3.8-slim 

%labels
    APPLICATION_NAME pgcli
    YEAR 2021

%post
    pip install pgcli


%runscript
  pgcli "$@"

%help
    This will run pgcli    
    
    Use below commands:
      ./<mysingularity_name> Run pgcli
   
   *Build singularity container* - This will build an immutable container (recommended in production environments):
    singularity build --remote <mysingularity_name>.sif Singularity.def

    *To build development container* - Where you can install additional components as needed:
    singularity build --sandbox <mysingularity_name>/ Singularity.def

    *Shell into singularity container*
    singularity shell --contain --writable <mysingularity_name>/

    --writable option must be provided to install any packages.
    You cannot use --writable option with immutable containers

    *Exec into singularity container*- To run any command from host inside container
    singularity exec --contain <mysingularity_name>/ env

    *Run singularity container in background and access notebook* - This will run %starscript section commands
    singularity instance start <mysingularity_name>/ demotest

    *Check running instances* - This should list demotest instance started above
    singularity instance list

